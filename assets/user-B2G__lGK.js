var _=Object.defineProperty;var y=t=>{throw TypeError(t)};var b=(t,e,r)=>e in t?_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var T=(t,e,r)=>b(t,typeof e!="symbol"?e+"":e,r),v=(t,e,r)=>e.has(t)||y("Cannot "+r);var o=(t,e,r)=>(v(t,e,"read from private field"),r?r.call(t):e.get(t)),L=(t,e,r)=>e.has(t)?y("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),I=(t,e,r,u)=>(v(t,e,"write to private field"),u?u.call(t,r):e.set(t,r),r);import{d as F}from"./pinia-DS8gDiZ7.js";import{ak as w,r as A,al as S,a as k}from"./index-DBDKhFHL.js";import{c as x,u as N,d as U}from"./workout-BwrRKyUc.js";const c=class c{constructor(){}isOfType(e){return i}filter(e){return this}flat(){return this}flatMap(e){return this}reduce(e,r){return r}forEach(e){}fold(e,r){return e()}getOrElse(e){return e}orElse(e){return e()}isEmpty(){return!0}map(e){return this}};T(c,"instance",new c);let p=c;const i=p.instance;var n;const d=class d{constructor(e){L(this,n);I(this,n,e)}isOfType(e){return e(o(this,n))?this:i}filter(e){return e(o(this,n))?this:i}flat(){return o(this,n)instanceof d?o(this,n):i}flatMap(e){return e(o(this,n))}reduce(e,r){return e(o(this,n))}fold(e,r){return r(o(this,n))}forEach(e){e(o(this,n))}getOrElse(e){return o(this,n)}orElse(e){return this}isEmpty(){return!1}map(e){return P(e(o(this,n)))}};n=new WeakMap;let h=d;function P(t){return t==null||typeof t=="number"&&isNaN(t)?i:new h(t)}const R="wu_player";function D(){return P(w.getItem(R))}function G(t){x(R,t)}const m=600,a=14;function Y(t){const e=a/2,r=(2*m-3*a)/2,u=a-m-t,f=(-579+Math.sqrt(r**2-4*e*u))/(2*e);return Math.floor(f)}function E(t){return a*(t-1)+m}function H(t){return(t-1)*(E(2)+E(t))/2}const V=100,M=75,q=4,C=1,K=.05;function j(t){return Math.round(V+z(t)-$(t))}function z(t){return O(t.rounds.map(J))}function J(t){return C*t.repetitions*Q(t.weight)}function Q(t){return W(t*Z(t))}function Z(t){return q*W(t)**2}function W(t){return(t+M)/M}function $(t){const e=t.rounds.slice(0,-1);return O(e.map(tt))}function tt(t){return t.restTime*K}function O(t){return t.reduce((e,r)=>e+r,0)}const st=F("user",()=>{const t=A(D().getOrElse(et()));S(()=>G(t.value));const e=k(()=>{const s=t.value.name,f=t.value.bodyWeight,g=t.value.experience,l=Y(g),B=E(l),X=H(l+1)-g;return{name:s,bodyWeight:f,level:l,totalXpInLevel:B,currentXpInLevel:X}});function r(s){t.value.name=s.name,t.value.bodyWeight=s.bodyWeight}function u(s){t.value.experience+=s}return{profile:e,saveProfile:r,addXp:u}});function et(){const e=N().workouts.map(r=>j(r)).reduce((r,u)=>r+u,0);return{id:U(),name:"Guest",bodyWeight:75,experience:e}}export{j as g,st as u};
