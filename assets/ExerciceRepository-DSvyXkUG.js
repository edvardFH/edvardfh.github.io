import{h as ie,j as ae,Q as H}from"./QBtn-CbnGcuH3.js";import{Q as ue,W as R}from"./WuBaseInput-BPVuqhb2.js";import{y as B,aa as O,ab as I,t as F,u as x,ac as de,r as D,ad as ce,S as z,W,ae as A,n as fe,Q as $,X,P as J,a3 as P,af as me,O as pe,c as ve,g as he,a as q,a1 as ge,b as ye,h as U,ag as be,F as C,v as _,x as K,ah as G,G as S,J as Y,z as g,A as y,w as we,I as Z,H as ee,B as te,C as Ve}from"./index-DnkTb3vN.js";import{_ as L,a as Ce,s as xe,W as Q,b as ke}from"./workout-BYzdCl7S.js";import{u as Ee,b as Se,W as _e}from"./WuPage-D2XKmL60.js";import{c as Re,u as qe}from"./StringAbbreviation-Dohl6LzU.js";import{u as Te}from"./WindowWidth-DfNV-kaB.js";const Me=B({__name:"WuBaseTextarea",props:O({placeholder:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const t=I(l,"modelValue");return(s,d)=>(x(),F(ue,{placeholder:s.placeholder??"",filled:"",dense:"",autogrow:"",modelValue:t.value,"onUpdate:modelValue":d[0]||(d[0]=e=>t.value=e)},null,8,["placeholder","modelValue"]))}}),De=L(Me,[["__scopeId","data-v-422bb83b"]]);function re(l){const t=de(l);return t!==void 0?We(t):D(t)}function We(l){const t=JSON.parse(JSON.stringify(l));return D(t)}const N={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Be=Object.keys(N);N.all=!0;function oe(l){const t={};for(const s of Be)l[s]===!0&&(t[s]=!0);return Object.keys(t).length===0?N:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}const $e=["INPUT","TEXTAREA"];function ne(l,t){return t.event===void 0&&l.target!==void 0&&l.target.draggable!==!0&&typeof t.handler=="function"&&$e.includes(l.target.nodeName.toUpperCase())===!1&&(l.qClonedBy===void 0||l.qClonedBy.indexOf(t.uid)===-1)}function j(l,t,s){const d=X(l);let e,o=d.left-t.event.x,r=d.top-t.event.y,i=Math.abs(o),c=Math.abs(r);const n=t.direction;n.horizontal===!0&&n.vertical!==!0?e=o<0?"left":"right":n.horizontal!==!0&&n.vertical===!0?e=r<0?"up":"down":n.up===!0&&r<0?(e="up",i>c&&(n.left===!0&&o<0?e="left":n.right===!0&&o>0&&(e="right"))):n.down===!0&&r>0?(e="down",i>c&&(n.left===!0&&o<0?e="left":n.right===!0&&o>0&&(e="right"))):n.left===!0&&o<0?(e="left",i<c&&(n.up===!0&&r<0?e="up":n.down===!0&&r>0&&(e="down"))):n.right===!0&&o>0&&(e="right",i<c&&(n.up===!0&&r<0?e="up":n.down===!0&&r>0&&(e="down")));let m=!1;if(e===void 0&&s===!1){if(t.event.isFirst===!0||t.event.lastDir===void 0)return{};e=t.event.lastDir,m=!0,e==="left"||e==="right"?(d.left-=o,i=0,o=0):(d.top-=r,c=0,r=0)}return{synthetic:m,payload:{evt:l,touch:t.event.mouse!==!0,mouse:t.event.mouse===!0,position:d,direction:e,isFirst:t.event.isFirst,isFinal:s===!0,duration:Date.now()-t.event.time,distance:{x:i,y:c},offset:{x:o,y:r},delta:{x:d.left-t.event.lastX,y:d.top-t.event.lastY}}}}let Ue=0;const Oe=ce({name:"touch-pan",beforeMount(l,{value:t,modifiers:s}){if(s.mouse!==!0&&W.has.touch!==!0)return;function d(o,r){s.mouse===!0&&r===!0?pe(o):(s.stop===!0&&P(o),s.prevent===!0&&J(o))}const e={uid:"qvtp_"+Ue++,handler:t,modifiers:s,direction:oe(s),noop:fe,mouseStart(o){ne(o,e)&&me(o)&&($(e,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),e.start(o,!0))},touchStart(o){if(ne(o,e)){const r=o.target;$(e,"temp",[[r,"touchmove","move","notPassiveCapture"],[r,"touchcancel","end","passiveCapture"],[r,"touchend","end","passiveCapture"]]),e.start(o)}},start(o,r){if(W.is.firefox===!0&&A(l,!0),e.lastEvt=o,r===!0||s.stop===!0){if(e.direction.all!==!0&&(r!==!0||e.modifiers.mouseAllDir!==!0&&e.modifiers.mousealldir!==!0)){const n=o.type.indexOf("mouse")!==-1?new MouseEvent(o.type,o):new TouchEvent(o.type,o);o.defaultPrevented===!0&&J(n),o.cancelBubble===!0&&P(n),Object.assign(n,{qKeyEvent:o.qKeyEvent,qClickOutside:o.qClickOutside,qAnchorHandled:o.qAnchorHandled,qClonedBy:o.qClonedBy===void 0?[e.uid]:o.qClonedBy.concat(e.uid)}),e.initialEvent={target:o.target,event:n}}P(o)}const{left:i,top:c}=X(o);e.event={x:i,y:c,time:Date.now(),mouse:r===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:i,lastY:c}},move(o){if(e.event===void 0)return;const r=X(o),i=r.left-e.event.x,c=r.top-e.event.y;if(i===0&&c===0)return;e.lastEvt=o;const n=e.event.mouse===!0,m=()=>{d(o,n);let f;s.preserveCursor!==!0&&s.preservecursor!==!0&&(f=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),n===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Re(),e.styleCleanup=a=>{if(e.styleCleanup=void 0,f!==void 0&&(document.documentElement.style.cursor=f),document.body.classList.remove("non-selectable"),n===!0){const b=()=>{document.body.classList.remove("no-pointer-events--children")};a!==void 0?setTimeout(()=>{b(),a()},50):b()}else a!==void 0&&a()}};if(e.event.detected===!0){e.event.isFirst!==!0&&d(o,e.event.mouse);const{payload:f,synthetic:a}=j(o,e,!1);f!==void 0&&(e.handler(f)===!1?e.end(o):(e.styleCleanup===void 0&&e.event.isFirst===!0&&m(),e.event.lastX=f.position.left,e.event.lastY=f.position.top,e.event.lastDir=a===!0?void 0:f.direction,e.event.isFirst=!1));return}if(e.direction.all===!0||n===!0&&(e.modifiers.mouseAllDir===!0||e.modifiers.mousealldir===!0)){m(),e.event.detected=!0,e.move(o);return}const p=Math.abs(i),h=Math.abs(c);p!==h&&(e.direction.horizontal===!0&&p>h||e.direction.vertical===!0&&p<h||e.direction.up===!0&&p<h&&c<0||e.direction.down===!0&&p<h&&c>0||e.direction.left===!0&&p>h&&i<0||e.direction.right===!0&&p>h&&i>0?(e.event.detected=!0,e.move(o)):e.end(o,!0))},end(o,r){if(e.event!==void 0){if(z(e,"temp"),W.is.firefox===!0&&A(l,!1),r===!0)e.styleCleanup?.(),e.event.detected!==!0&&e.initialEvent!==void 0&&e.initialEvent.target.dispatchEvent(e.initialEvent.event);else if(e.event.detected===!0){e.event.isFirst===!0&&e.handler(j(o===void 0?e.lastEvt:o,e).payload);const{payload:i}=j(o===void 0?e.lastEvt:o,e,!0),c=()=>{e.handler(i)};e.styleCleanup!==void 0?e.styleCleanup(c):c()}e.event=void 0,e.initialEvent=void 0,e.lastEvt=void 0}}};if(l.__qtouchpan=e,s.mouse===!0){const o=s.mouseCapture===!0||s.mousecapture===!0?"Capture":"";$(e,"main",[[l,"mousedown","mouseStart",`passive${o}`]])}W.has.touch===!0&&$(e,"main",[[l,"touchstart","touchStart",`passive${s.capture===!0?"Capture":""}`],[l,"touchmove","noop","notPassiveCapture"]])},updated(l,t){const s=l.__qtouchpan;s!==void 0&&(t.oldValue!==t.value&&(typeof value!="function"&&s.end(),s.handler=t.value),s.direction=oe(t.modifiers))},beforeUnmount(l){const t=l.__qtouchpan;t!==void 0&&(t.event!==void 0&&t.end(),z(t,"main"),z(t,"temp"),W.is.firefox===!0&&A(l,!1),t.styleCleanup?.(),delete l.__qtouchpan)}});function Ie(){let l=Object.create(null);return{getCache:(t,s)=>l[t]===void 0?l[t]=typeof s=="function"?s():s:l[t],setCache(t,s){l[t]=s},hasCache(t){return Object.hasOwnProperty.call(l,t)},clearCache(t){t!==void 0?delete l[t]:l=Object.create(null)}}}const se=[["left","center","start","width"],["right","center","end","width"],["top","start","center","height"],["bottom","end","center","height"]],Fe=ve({name:"QSlideItem",props:{...Ee,leftColor:String,rightColor:String,topColor:String,bottomColor:String,onSlide:Function},emits:["action","top","right","bottom","left"],setup(l,{slots:t,emit:s}){const{proxy:d}=he(),{$q:e}=d,o=Se(l,e),{getCache:r}=Ie(),i=D(null);let c=null,n={},m={},p={};const h=q(()=>e.lang.rtl===!0?{left:"right",right:"left"}:{left:"left",right:"right"}),f=q(()=>"q-slide-item q-item-type overflow-hidden"+(o.value===!0?" q-slide-item--dark q-dark":""));function a(){i.value.style.transform="translate(0,0)"}function b(u,E,w){l.onSlide!==void 0&&s("slide",{side:u,ratio:E,isReset:w})}function T(u){const E=i.value;if(u.isFirst)n={dir:null,size:{left:0,right:0,top:0,bottom:0},scale:0},E.classList.add("no-transition"),se.forEach(v=>{if(t[v[0]]!==void 0){const M=p[v[0]];M.style.transform="scale(1)",n.size[v[0]]=M.getBoundingClientRect()[v[3]]}}),n.axis=u.direction==="up"||u.direction==="down"?"Y":"X";else if(u.isFinal){E.classList.remove("no-transition"),n.scale===1?(E.style.transform=`translate${n.axis}(${n.dir*100}%)`,c!==null&&clearTimeout(c),c=setTimeout(()=>{c=null,s(n.showing,{reset:a}),s("action",{side:n.showing,reset:a})},230)):(E.style.transform="translate(0,0)",b(n.showing,0,!0));return}else u.direction=n.axis==="X"?u.offset.x<0?"left":"right":u.offset.y<0?"up":"down";if(t.left===void 0&&u.direction===h.value.right||t.right===void 0&&u.direction===h.value.left||t.top===void 0&&u.direction==="down"||t.bottom===void 0&&u.direction==="up"){E.style.transform="translate(0,0)";return}let w,k,V;n.axis==="X"?(k=u.direction==="left"?-1:1,w=k===1?h.value.left:h.value.right,V=u.distance.x):(k=u.direction==="up"?-2:2,w=k===2?"top":"bottom",V=u.distance.y),!(n.dir!==null&&Math.abs(k)!==Math.abs(n.dir))&&(n.dir!==k&&(["left","right","top","bottom"].forEach(v=>{m[v]&&(m[v].style.visibility=w===v?"visible":"hidden")}),n.showing=w,n.dir=k),n.scale=Math.max(0,Math.min(1,(V-40)/n.size[w])),E.style.transform=`translate${n.axis}(${V*k/Math.abs(k)}px)`,p[w].style.transform=`scale(${n.scale})`,b(w,n.scale,!1))}return ge(()=>{m={},p={}}),ye(()=>{c!==null&&clearTimeout(c)}),Object.assign(d,{reset:a}),()=>{const u=[],E={left:t[h.value.right]!==void 0,right:t[h.value.left]!==void 0,up:t.bottom!==void 0,down:t.top!==void 0},w=Object.keys(E).filter(V=>E[V]===!0);se.forEach(V=>{const v=V[0];t[v]!==void 0&&u.push(U("div",{key:v,ref:M=>{m[v]=M},class:`q-slide-item__${v} absolute-full row no-wrap items-${V[1]} justify-${V[2]}`+(l[v+"Color"]!==void 0?` bg-${l[v+"Color"]}`:"")},[U("div",{ref:M=>{p[v]=M}},t[v]())]))});const k=U("div",{key:`${w.length===0?"only-":""} content`,ref:i,class:"q-slide-item__content"},ie(t.default));return w.length===0?u.push(k):u.push(be(k,r("dir#"+w.join(""),()=>{const V={prevent:!0,stop:!0,mouse:!0};return w.forEach(v=>{V[v]=!0}),[[Oe,T,void 0,V]]}))),U("div",{class:f.value},u)}}}),Le=B({__name:"WuSlideItem",props:{color:{}},setup(l){return(t,s)=>(x(),F(Fe,{"right-color":C(Ce)(t.color)},{right:_(()=>[K(t.$slots,"right")]),default:_(()=>[K(t.$slots,"default")]),_:3},8,["right-color"]))}});function ze(l,t){const s=G(l),d=G(t);return{suggestion:q(()=>d.value.find(r=>xe(r,s.value))??"")}}const Ae=B({__name:"RoundEditRow",props:O({exercises:{},focus:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const t=l,s=I(l,"modelValue"),d=q(()=>s.value.exercice.name),e=D(!1),{suggestion:o}=ze(d,t.exercises.map(n=>n.name)),r=q(()=>e.value?"":o.value.slice(d.value.length));function i(){o.value===""||e.value||(s.value.exercice.name=o.value)}function c(n){n.key==="Escape"&&(e.value=!0)}return(n,m)=>(x(),S(Y,null,[g("span",null,[y(R,{class:"input",focus:!!n.focus,modelValue:s.value.exercice.name,"onUpdate:modelValue":m[0]||(m[0]=p=>s.value.exercice.name=p),shadowText:r.value,onFocusout:i,onKeydown:c},null,8,["focus","modelValue","shadowText"])]),g("span",null,[y(R,{class:"input",mask:"###",inputmode:"numeric","text-right":"",modelValue:s.value.repetitions,"onUpdate:modelValue":m[1]||(m[1]=p=>s.value.repetitions=p),modelModifiers:{number:!0}},null,8,["modelValue"])]),g("span",null,[y(R,{class:"input",mask:"###",inputmode:"numeric","text-right":"",modelValue:s.value.weight,"onUpdate:modelValue":m[2]||(m[2]=p=>s.value.weight=p),modelModifiers:{number:!0}},null,8,["modelValue"])]),g("span",null,[y(R,{class:"input",mask:"###",inputmode:"numeric","text-right":"",modelValue:s.value.restTime,"onUpdate:modelValue":m[3]||(m[3]=p=>s.value.restTime=p),modelModifiers:{number:!0}},null,8,["modelValue"])])],64))}}),le=L(Ae,[["__scopeId","data-v-eeb9db9b"]]),Pe={class:"wu-header"},je={key:0,class:"unit"},Xe={key:0,class:"round-item"},Ye={class:"round-item"},Qe={key:0,class:"row justify-center content-center text-grey-8",style:{width:"100%",height:"48px"}},Ne=B({__name:"RoundEditTable",props:O({exercises:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const t=I(l,"modelValue"),{isScreenLarge:s}=Te(),{getReactiveStr:d}=qe(),e=q(()=>[{label:d("Exercise","Exer.").value,unit:""},{label:d("Repetitions","Reps.").value,unit:""},{label:d("Weight","Wgt.").value,unit:"kg"},{label:d("Rest Time","Rest").value,unit:"s"}]),o=q(()=>t.value.rounds.at(-1));function r(){const f=re(o.value),a={exercice:{name:"",category:""},repetitions:"0",weight:"0",restTime:"0"};t.value.rounds.push(f.value??a)}function i(f){t.value.rounds=t.value.rounds.filter(a=>a!==f)}function c(f,a){i(a),f.reset()}const n=D(!1),m=q(()=>f=>n.value&&f===o.value);we(()=>t.value.rounds.length,(f,a)=>{if(f<=a){n.value=!1;return}p(),n.value=!0},{flush:"post"});function p(){h.value&&scrollTo({top:h.value.scrollHeight,behavior:"smooth"})}const h=D();return(f,a)=>(x(),S("div",{class:"wu-table",ref_key:"tableRef",ref:h},[g("div",Pe,[(x(!0),S(Y,null,ee(e.value,b=>(x(),S("span",{class:"header-label",key:b.label},[g("span",null,te(b.label),1),b.unit?(x(),S("span",je,[a[0]||(a[0]=g("span",null,"(",-1)),g("span",null,te(b.unit),1),a[1]||(a[1]=g("span",null,")",-1))])):Z("",!0)]))),128)),a[2]||(a[2]=g("span",{class:"hide-when-small",style:{width:"40px"}},null,-1))]),g("div",null,[(x(!0),S(Y,null,ee(t.value.rounds,(b,T)=>(x(),S("div",{key:T},[C(s)?(x(),S("div",Xe,[y(le,{modelValue:t.value.rounds[T],"onUpdate:modelValue":u=>t.value.rounds[T]=u,focus:m.value(b),exercises:f.exercises},null,8,["modelValue","onUpdate:modelValue","focus","exercises"]),y(Q,{tertiary:"",icon:"close",onClick:u=>i(b)},null,8,["onClick"])])):(x(),F(Le,{key:1,onRight:u=>c(u,b),color:"red"},{right:_(()=>a[3]||(a[3]=[Ve(" Delete ")])),default:_(()=>[g("div",Ye,[y(le,{modelValue:t.value.rounds[T],"onUpdate:modelValue":u=>t.value.rounds[T]=u,focus:m.value(b),exercises:f.exercises},null,8,["modelValue","onUpdate:modelValue","focus","exercises"])])]),_:2},1032,["onRight"]))]))),128))]),t.value.rounds.length===0?(x(),S("div",Qe,a[4]||(a[4]=[g("span",null," Your rounds will appear here ",-1)]))):Z("",!0),g("div",null,[y(ae,{flat:"",icon:"add",ripple:!1,padding:"0",style:{width:"100%",height:"40px"},onClick:r})])],512))}}),He=L(Ne,[["__scopeId","data-v-cf13974f"]]),Je={class:"wu-header-wrapper"},Ke=B({__name:"WorkoutEdit",props:O({exercises:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const t=I(l,"modelValue");function s(){return t.value.id?{name:"WorkoutDetails",params:{workoutId:t.value.id}}:{name:"HomePage"}}function d(){t.value=e.value}const e=re(t.value);return(o,r)=>(x(),F(_e,null,{header:_(()=>[g("div",Je,[g("div",null,[y(R,{class:"date",modelValue:C(e).date,"onUpdate:modelValue":r[0]||(r[0]=i=>C(e).date=i),mask:"####/##/##",inputmode:"numeric",placeholder:"Date"},null,8,["modelValue"]),y(R,{class:"small-input hide-when-large",modelValue:C(e).totalDuration,"onUpdate:modelValue":r[1]||(r[1]=i=>C(e).totalDuration=i),placeholder:"00:00",mask:"##:##",inputmode:"numeric"},{default:_(()=>[y(H,{size:"sm",name:"schedule"})]),_:1},8,["modelValue"])]),g("div",null,[y(R,{modelValue:C(e).name,"onUpdate:modelValue":r[2]||(r[2]=i=>C(e).name=i),placeholder:"Title",class:"workout-title text-h5"},null,8,["modelValue"]),y(R,{class:"small-input hide-when-small",modelValue:C(e).totalDuration,"onUpdate:modelValue":r[3]||(r[3]=i=>C(e).totalDuration=i),placeholder:"00:00",inputmode:"numeric",mask:"##:##"},{default:_(()=>[y(H,{size:"sm",name:"schedule"})]),_:1},8,["modelValue"])]),g("div",null,[y(De,{class:"workout-notes",modelValue:C(e).notes,"onUpdate:modelValue":r[4]||(r[4]=i=>C(e).notes=i),placeholder:"Notes"},null,8,["modelValue"])])])]),body:_(()=>[y(He,{"model-value":C(e),exercises:o.exercises},null,8,["model-value","exercises"])]),footer:_(()=>[y(Q,{class:"q-mr-md",secondary:"",icon:"arrow_back",label:"Return",to:s()},null,8,["to"]),y(Q,{icon:"check",primary:"",label:"Save",color:"primary",onClick:d,to:s()},null,8,["to"])]),_:1}))}}),lt=L(Ke,[["__scopeId","data-v-52cc93c1"]]);function rt(){return[...new Set(ke().flatMap(t=>t.rounds).map(t=>t.exercice.name))].map(t=>({name:t,category:""}))}export{lt as W,rt as g};
