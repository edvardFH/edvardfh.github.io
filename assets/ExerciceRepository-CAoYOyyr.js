import{Q as H}from"./use-router-link-DGfR_u9s.js";import{Q as ie,W as S}from"./WuBaseInput-Bqbj4qYz.js";import{x as $,ad as O,ae as I,s as L,t as x,af as ae,r as M,ag as ue,X as A,$ as W,ah as F,n as de,W as B,a0 as X,V as K,a6 as j,ai as ce,G as fe,c as me,g as pe,a as q,a4 as ve,o as he,h as U,D as ge,N as C,u as R,v as J,aj as G,O as _,P as Q,y as g,z as y,w as ye,R as Z,Q as ee,A as te,B as be}from"./index-COIJD5_D.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as we,s as Ve,W as Y,b as Ce}from"./workout-CRisN4g1.js";import{u as xe,a as ke,W as Ee}from"./WorkoutLayout-C4zDgaUe.js";import{Q as _e}from"./QBtn-CXgGYxvU.js";import{c as Re,u as Se}from"./StringAbbreviation-BTZuWnuQ.js";import{h as qe}from"./render-Clr0wJTG.js";import{u as Te}from"./WindowWidth-C70C0iPD.js";const De=$({__name:"WuBaseTextarea",props:O({placeholder:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const t=I(r,"modelValue");return(s,d)=>(x(),L(ie,{placeholder:s.placeholder??"",filled:"",dense:"",autogrow:"",modelValue:t.value,"onUpdate:modelValue":d[0]||(d[0]=e=>t.value=e)},null,8,["placeholder","modelValue"]))}}),Me=z(De,[["__scopeId","data-v-422bb83b"]]);function le(r){const t=ae(r);return t!==void 0?We(t):M(t)}function We(r){const t=JSON.parse(JSON.stringify(r));return M(t)}const N={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},$e=Object.keys(N);N.all=!0;function oe(r){const t={};for(const s of $e)r[s]===!0&&(t[s]=!0);return Object.keys(t).length===0?N:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}const Be=["INPUT","TEXTAREA"];function ne(r,t){return t.event===void 0&&r.target!==void 0&&r.target.draggable!==!0&&typeof t.handler=="function"&&Be.includes(r.target.nodeName.toUpperCase())===!1&&(r.qClonedBy===void 0||r.qClonedBy.indexOf(t.uid)===-1)}function P(r,t,s){const d=X(r);let e,o=d.left-t.event.x,l=d.top-t.event.y,i=Math.abs(o),c=Math.abs(l);const n=t.direction;n.horizontal===!0&&n.vertical!==!0?e=o<0?"left":"right":n.horizontal!==!0&&n.vertical===!0?e=l<0?"up":"down":n.up===!0&&l<0?(e="up",i>c&&(n.left===!0&&o<0?e="left":n.right===!0&&o>0&&(e="right"))):n.down===!0&&l>0?(e="down",i>c&&(n.left===!0&&o<0?e="left":n.right===!0&&o>0&&(e="right"))):n.left===!0&&o<0?(e="left",i<c&&(n.up===!0&&l<0?e="up":n.down===!0&&l>0&&(e="down"))):n.right===!0&&o>0&&(e="right",i<c&&(n.up===!0&&l<0?e="up":n.down===!0&&l>0&&(e="down")));let m=!1;if(e===void 0&&s===!1){if(t.event.isFirst===!0||t.event.lastDir===void 0)return{};e=t.event.lastDir,m=!0,e==="left"||e==="right"?(d.left-=o,i=0,o=0):(d.top-=l,c=0,l=0)}return{synthetic:m,payload:{evt:r,touch:t.event.mouse!==!0,mouse:t.event.mouse===!0,position:d,direction:e,isFirst:t.event.isFirst,isFinal:s===!0,duration:Date.now()-t.event.time,distance:{x:i,y:c},offset:{x:o,y:l},delta:{x:d.left-t.event.lastX,y:d.top-t.event.lastY}}}}let Ue=0;const Oe=ue({name:"touch-pan",beforeMount(r,{value:t,modifiers:s}){if(s.mouse!==!0&&W.has.touch!==!0)return;function d(o,l){s.mouse===!0&&l===!0?fe(o):(s.stop===!0&&j(o),s.prevent===!0&&K(o))}const e={uid:"qvtp_"+Ue++,handler:t,modifiers:s,direction:oe(s),noop:de,mouseStart(o){ne(o,e)&&ce(o)&&(B(e,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),e.start(o,!0))},touchStart(o){if(ne(o,e)){const l=o.target;B(e,"temp",[[l,"touchmove","move","notPassiveCapture"],[l,"touchcancel","end","passiveCapture"],[l,"touchend","end","passiveCapture"]]),e.start(o)}},start(o,l){if(W.is.firefox===!0&&F(r,!0),e.lastEvt=o,l===!0||s.stop===!0){if(e.direction.all!==!0&&(l!==!0||e.modifiers.mouseAllDir!==!0&&e.modifiers.mousealldir!==!0)){const n=o.type.indexOf("mouse")!==-1?new MouseEvent(o.type,o):new TouchEvent(o.type,o);o.defaultPrevented===!0&&K(n),o.cancelBubble===!0&&j(n),Object.assign(n,{qKeyEvent:o.qKeyEvent,qClickOutside:o.qClickOutside,qAnchorHandled:o.qAnchorHandled,qClonedBy:o.qClonedBy===void 0?[e.uid]:o.qClonedBy.concat(e.uid)}),e.initialEvent={target:o.target,event:n}}j(o)}const{left:i,top:c}=X(o);e.event={x:i,y:c,time:Date.now(),mouse:l===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:i,lastY:c}},move(o){if(e.event===void 0)return;const l=X(o),i=l.left-e.event.x,c=l.top-e.event.y;if(i===0&&c===0)return;e.lastEvt=o;const n=e.event.mouse===!0,m=()=>{d(o,n);let f;s.preserveCursor!==!0&&s.preservecursor!==!0&&(f=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),n===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Re(),e.styleCleanup=a=>{if(e.styleCleanup=void 0,f!==void 0&&(document.documentElement.style.cursor=f),document.body.classList.remove("non-selectable"),n===!0){const b=()=>{document.body.classList.remove("no-pointer-events--children")};a!==void 0?setTimeout(()=>{b(),a()},50):b()}else a!==void 0&&a()}};if(e.event.detected===!0){e.event.isFirst!==!0&&d(o,e.event.mouse);const{payload:f,synthetic:a}=P(o,e,!1);f!==void 0&&(e.handler(f)===!1?e.end(o):(e.styleCleanup===void 0&&e.event.isFirst===!0&&m(),e.event.lastX=f.position.left,e.event.lastY=f.position.top,e.event.lastDir=a===!0?void 0:f.direction,e.event.isFirst=!1));return}if(e.direction.all===!0||n===!0&&(e.modifiers.mouseAllDir===!0||e.modifiers.mousealldir===!0)){m(),e.event.detected=!0,e.move(o);return}const p=Math.abs(i),h=Math.abs(c);p!==h&&(e.direction.horizontal===!0&&p>h||e.direction.vertical===!0&&p<h||e.direction.up===!0&&p<h&&c<0||e.direction.down===!0&&p<h&&c>0||e.direction.left===!0&&p>h&&i<0||e.direction.right===!0&&p>h&&i>0?(e.event.detected=!0,e.move(o)):e.end(o,!0))},end(o,l){if(e.event!==void 0){if(A(e,"temp"),W.is.firefox===!0&&F(r,!1),l===!0)e.styleCleanup?.(),e.event.detected!==!0&&e.initialEvent!==void 0&&e.initialEvent.target.dispatchEvent(e.initialEvent.event);else if(e.event.detected===!0){e.event.isFirst===!0&&e.handler(P(o===void 0?e.lastEvt:o,e).payload);const{payload:i}=P(o===void 0?e.lastEvt:o,e,!0),c=()=>{e.handler(i)};e.styleCleanup!==void 0?e.styleCleanup(c):c()}e.event=void 0,e.initialEvent=void 0,e.lastEvt=void 0}}};if(r.__qtouchpan=e,s.mouse===!0){const o=s.mouseCapture===!0||s.mousecapture===!0?"Capture":"";B(e,"main",[[r,"mousedown","mouseStart",`passive${o}`]])}W.has.touch===!0&&B(e,"main",[[r,"touchstart","touchStart",`passive${s.capture===!0?"Capture":""}`],[r,"touchmove","noop","notPassiveCapture"]])},updated(r,t){const s=r.__qtouchpan;s!==void 0&&(t.oldValue!==t.value&&(typeof value!="function"&&s.end(),s.handler=t.value),s.direction=oe(t.modifiers))},beforeUnmount(r){const t=r.__qtouchpan;t!==void 0&&(t.event!==void 0&&t.end(),A(t,"main"),A(t,"temp"),W.is.firefox===!0&&F(r,!1),t.styleCleanup?.(),delete r.__qtouchpan)}});function Ie(){let r=Object.create(null);return{getCache:(t,s)=>r[t]===void 0?r[t]=typeof s=="function"?s():s:r[t],setCache(t,s){r[t]=s},hasCache(t){return Object.hasOwnProperty.call(r,t)},clearCache(t){t!==void 0?delete r[t]:r=Object.create(null)}}}const se=[["left","center","start","width"],["right","center","end","width"],["top","start","center","height"],["bottom","end","center","height"]],Le=me({name:"QSlideItem",props:{...xe,leftColor:String,rightColor:String,topColor:String,bottomColor:String,onSlide:Function},emits:["action","top","right","bottom","left"],setup(r,{slots:t,emit:s}){const{proxy:d}=pe(),{$q:e}=d,o=ke(r,e),{getCache:l}=Ie(),i=M(null);let c=null,n={},m={},p={};const h=q(()=>e.lang.rtl===!0?{left:"right",right:"left"}:{left:"left",right:"right"}),f=q(()=>"q-slide-item q-item-type overflow-hidden"+(o.value===!0?" q-slide-item--dark q-dark":""));function a(){i.value.style.transform="translate(0,0)"}function b(u,E,w){r.onSlide!==void 0&&s("slide",{side:u,ratio:E,isReset:w})}function T(u){const E=i.value;if(u.isFirst)n={dir:null,size:{left:0,right:0,top:0,bottom:0},scale:0},E.classList.add("no-transition"),se.forEach(v=>{if(t[v[0]]!==void 0){const D=p[v[0]];D.style.transform="scale(1)",n.size[v[0]]=D.getBoundingClientRect()[v[3]]}}),n.axis=u.direction==="up"||u.direction==="down"?"Y":"X";else if(u.isFinal){E.classList.remove("no-transition"),n.scale===1?(E.style.transform=`translate${n.axis}(${n.dir*100}%)`,c!==null&&clearTimeout(c),c=setTimeout(()=>{c=null,s(n.showing,{reset:a}),s("action",{side:n.showing,reset:a})},230)):(E.style.transform="translate(0,0)",b(n.showing,0,!0));return}else u.direction=n.axis==="X"?u.offset.x<0?"left":"right":u.offset.y<0?"up":"down";if(t.left===void 0&&u.direction===h.value.right||t.right===void 0&&u.direction===h.value.left||t.top===void 0&&u.direction==="down"||t.bottom===void 0&&u.direction==="up"){E.style.transform="translate(0,0)";return}let w,k,V;n.axis==="X"?(k=u.direction==="left"?-1:1,w=k===1?h.value.left:h.value.right,V=u.distance.x):(k=u.direction==="up"?-2:2,w=k===2?"top":"bottom",V=u.distance.y),!(n.dir!==null&&Math.abs(k)!==Math.abs(n.dir))&&(n.dir!==k&&(["left","right","top","bottom"].forEach(v=>{m[v]&&(m[v].style.visibility=w===v?"visible":"hidden")}),n.showing=w,n.dir=k),n.scale=Math.max(0,Math.min(1,(V-40)/n.size[w])),E.style.transform=`translate${n.axis}(${V*k/Math.abs(k)}px)`,p[w].style.transform=`scale(${n.scale})`,b(w,n.scale,!1))}return ve(()=>{m={},p={}}),he(()=>{c!==null&&clearTimeout(c)}),Object.assign(d,{reset:a}),()=>{const u=[],E={left:t[h.value.right]!==void 0,right:t[h.value.left]!==void 0,up:t.bottom!==void 0,down:t.top!==void 0},w=Object.keys(E).filter(V=>E[V]===!0);se.forEach(V=>{const v=V[0];t[v]!==void 0&&u.push(U("div",{key:v,ref:D=>{m[v]=D},class:`q-slide-item__${v} absolute-full row no-wrap items-${V[1]} justify-${V[2]}`+(r[v+"Color"]!==void 0?` bg-${r[v+"Color"]}`:"")},[U("div",{ref:D=>{p[v]=D}},t[v]())]))});const k=U("div",{key:`${w.length===0?"only-":""} content`,ref:i,class:"q-slide-item__content"},qe(t.default));return w.length===0?u.push(k):u.push(ge(k,l("dir#"+w.join(""),()=>{const V={prevent:!0,stop:!0,mouse:!0};return w.forEach(v=>{V[v]=!0}),[[Oe,T,void 0,V]]}))),U("div",{class:f.value},u)}}}),ze=$({__name:"WuSlideItem",props:{color:{}},setup(r){return(t,s)=>(x(),L(Le,{"right-color":C(we)(t.color)},{right:R(()=>[J(t.$slots,"right")]),default:R(()=>[J(t.$slots,"default")]),_:3},8,["right-color"]))}});function Ae(r,t){const s=G(r),d=G(t);return{suggestion:q(()=>d.value.find(l=>Ve(l,s.value))??"")}}const Fe=$({__name:"RoundEditRow",props:O({exercises:{},focus:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const t=r,s=I(r,"modelValue"),d=q(()=>s.value.exercice.name),e=M(!1),{suggestion:o}=Ae(d,t.exercises.map(n=>n.name)),l=q(()=>e.value?"":o.value.slice(d.value.length));function i(){o.value===""||e.value||(s.value.exercice.name=o.value)}function c(n){n.key==="Escape"&&(e.value=!0)}return(n,m)=>(x(),_(Q,null,[g("span",null,[y(S,{class:"input",focus:!!n.focus,modelValue:s.value.exercice.name,"onUpdate:modelValue":m[0]||(m[0]=p=>s.value.exercice.name=p),shadowText:l.value,onFocusout:i,onKeydown:c},null,8,["focus","modelValue","shadowText"])]),g("span",null,[y(S,{class:"input",mask:"###",inputmode:"numeric","text-right":"",modelValue:s.value.repetitions,"onUpdate:modelValue":m[1]||(m[1]=p=>s.value.repetitions=p),modelModifiers:{number:!0}},null,8,["modelValue"])]),g("span",null,[y(S,{class:"input",mask:"###",inputmode:"numeric","text-right":"",modelValue:s.value.weight,"onUpdate:modelValue":m[2]||(m[2]=p=>s.value.weight=p),modelModifiers:{number:!0}},null,8,["modelValue"])]),g("span",null,[y(S,{class:"input",mask:"###",inputmode:"numeric","text-right":"",modelValue:s.value.restTime,"onUpdate:modelValue":m[3]||(m[3]=p=>s.value.restTime=p),modelModifiers:{number:!0}},null,8,["modelValue"])])],64))}}),re=z(Fe,[["__scopeId","data-v-eeb9db9b"]]),je={class:"wu-header"},Pe={key:0,class:"unit"},Xe={key:0,class:"round-item"},Qe={class:"round-item"},Ye={key:0,class:"row justify-center content-center text-grey-8",style:{width:"100%",height:"48px"}},Ne=$({__name:"RoundEditTable",props:O({exercises:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const t=I(r,"modelValue"),{isScreenLarge:s}=Te(),{getReactiveStr:d}=Se(),e=q(()=>[{label:d("Exercise","Exer.").value,unit:""},{label:d("Repetitions","Reps.").value,unit:""},{label:d("Weight","Wgt.").value,unit:"kg"},{label:d("Rest Time","Rest").value,unit:"s"}]),o=q(()=>t.value.rounds.at(-1));function l(){const f=le(o.value),a={exercice:{name:"",category:""},repetitions:"0",weight:"0",restTime:"0"};t.value.rounds.push(f.value??a)}function i(f){t.value.rounds=t.value.rounds.filter(a=>a!==f)}function c(f,a){i(a),f.reset()}const n=M(!1),m=q(()=>f=>n.value&&f===o.value);ye(()=>t.value.rounds.length,(f,a)=>{if(f<=a){n.value=!1;return}p(),n.value=!0},{flush:"post"});function p(){h.value&&scrollTo({top:h.value.scrollHeight,behavior:"smooth"})}const h=M();return(f,a)=>(x(),_("div",{class:"wu-table",ref_key:"tableRef",ref:h},[g("div",je,[(x(!0),_(Q,null,ee(e.value,b=>(x(),_("span",{class:"header-label",key:b.label},[g("span",null,te(b.label),1),b.unit?(x(),_("span",Pe,[a[0]||(a[0]=g("span",null,"(",-1)),g("span",null,te(b.unit),1),a[1]||(a[1]=g("span",null,")",-1))])):Z("",!0)]))),128)),a[2]||(a[2]=g("span",{class:"hide-when-small",style:{width:"40px"}},null,-1))]),g("div",null,[(x(!0),_(Q,null,ee(t.value.rounds,(b,T)=>(x(),_("div",{key:T},[C(s)?(x(),_("div",Xe,[y(re,{modelValue:t.value.rounds[T],"onUpdate:modelValue":u=>t.value.rounds[T]=u,focus:m.value(b),exercises:f.exercises},null,8,["modelValue","onUpdate:modelValue","focus","exercises"]),y(Y,{tertiary:"",icon:"close",onClick:u=>i(b)},null,8,["onClick"])])):(x(),L(ze,{key:1,onRight:u=>c(u,b),color:"red"},{right:R(()=>a[3]||(a[3]=[be(" Delete ")])),default:R(()=>[g("div",Qe,[y(re,{modelValue:t.value.rounds[T],"onUpdate:modelValue":u=>t.value.rounds[T]=u,focus:m.value(b),exercises:f.exercises},null,8,["modelValue","onUpdate:modelValue","focus","exercises"])])]),_:2},1032,["onRight"]))]))),128))]),t.value.rounds.length===0?(x(),_("div",Ye,a[4]||(a[4]=[g("span",null," Your rounds will appear here ",-1)]))):Z("",!0),g("div",null,[y(_e,{flat:"",icon:"add",ripple:!1,padding:"0",style:{width:"100%",height:"40px"},onClick:l})])],512))}}),He=z(Ne,[["__scopeId","data-v-cf13974f"]]),Ke={class:"wu-header-wrapper"},Je=$({__name:"WorkoutEdit",props:O({exercises:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const t=I(r,"modelValue");function s(){return t.value.id?{name:"WorkoutDetails",params:{workoutId:t.value.id}}:{name:"WorkoutHistory"}}function d(){t.value=e.value}const e=le(t.value);return(o,l)=>(x(),L(Ee,null,{header:R(()=>[g("div",Ke,[g("div",null,[y(S,{class:"date",modelValue:C(e).date,"onUpdate:modelValue":l[0]||(l[0]=i=>C(e).date=i),mask:"####/##/##",inputmode:"numeric",placeholder:"Date"},null,8,["modelValue"]),y(S,{class:"small-input hide-when-large",modelValue:C(e).totalDuration,"onUpdate:modelValue":l[1]||(l[1]=i=>C(e).totalDuration=i),placeholder:"00:00",mask:"##:##",inputmode:"numeric"},{default:R(()=>[y(H,{size:"sm",name:"schedule"})]),_:1},8,["modelValue"])]),g("div",null,[y(S,{modelValue:C(e).name,"onUpdate:modelValue":l[2]||(l[2]=i=>C(e).name=i),placeholder:"Title",class:"workout-title text-h5"},null,8,["modelValue"]),y(S,{class:"small-input hide-when-small",modelValue:C(e).totalDuration,"onUpdate:modelValue":l[3]||(l[3]=i=>C(e).totalDuration=i),placeholder:"00:00",inputmode:"numeric",mask:"##:##"},{default:R(()=>[y(H,{size:"sm",name:"schedule"})]),_:1},8,["modelValue"])]),g("div",null,[y(Me,{class:"workout-notes",modelValue:C(e).notes,"onUpdate:modelValue":l[4]||(l[4]=i=>C(e).notes=i),placeholder:"Notes"},null,8,["modelValue"])])])]),body:R(()=>[y(He,{"model-value":C(e),exercises:o.exercises},null,8,["model-value","exercises"])]),footer:R(()=>[y(Y,{class:"q-mr-md",secondary:"",icon:"arrow_back",label:"Return",to:s()},null,8,["to"]),y(Y,{icon:"check",primary:"",label:"Save",color:"primary",onClick:d,to:s()},null,8,["to"])]),_:1}))}}),at=z(Je,[["__scopeId","data-v-bce3c75d"]]);function ut(){return[...new Set(Ce().flatMap(t=>t.rounds).map(t=>t.exercice.name))].map(t=>({name:t,category:""}))}export{at as W,ut as g};
