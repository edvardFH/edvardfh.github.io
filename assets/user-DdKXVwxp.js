var B=Object.defineProperty;var E=t=>{throw TypeError(t)};var X=(t,e,n)=>e in t?B(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var d=(t,e,n)=>X(t,typeof e!="symbol"?e+"":e,n),y=(t,e,n)=>e.has(t)||E("Cannot "+n);var u=(t,e,n)=>(y(t,e,"read from private field"),n?n.call(t):e.get(t)),v=(t,e,n)=>e.has(t)?E("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),L=(t,e,n,o)=>(y(t,e,"write to private field"),o?o.call(t,n):e.set(t,n),n);import{d as _}from"./pinia-B2cuoRiU.js";import{ak as b,r as w,al as x,a as A}from"./index-BcBs46Eh.js";import{c as F,u as S,d as k}from"./workout--KoIstGW.js";const c=class c{constructor(){}isOfType(e){return i}filter(e){return this}flat(){return this}flatMap(e){return this}reduce(e,n){return n}forEach(e){}fold(e,n){return e()}getOrElse(e){return e}orElse(e){return e()}isEmpty(){return!0}map(e){return this}};d(c,"instance",new c);let f=c;const i=f.instance;var r;const g=class g{constructor(e){v(this,r);L(this,r,e)}isOfType(e){return e(u(this,r))?this:i}filter(e){return e(u(this,r))?this:i}flat(){return u(this,r)instanceof g?u(this,r):i}flatMap(e){return e(u(this,r))}reduce(e,n){return e(u(this,r))}fold(e,n){return n(u(this,r))}forEach(e){e(u(this,r))}getOrElse(e){return u(this,r)}orElse(e){return this}isEmpty(){return!1}map(e){return I(e(u(this,r)))}};r=new WeakMap;let p=g;function I(t){return t==null||typeof t=="number"&&isNaN(t)?i:new p(t)}const M="wu_player";function D(){return I(b.getItem(M))}function N(t){F(M,t)}const h=600,a=14;function U(t){const e=a/2,n=(2*h-3*a)/2,o=a-h-t,l=(-579+Math.sqrt(n**2-4*e*o))/(2*e);return Math.floor(l)}function m(t){return a*(t-1)+h}function G(t){return(t-1)*(m(1)+m(t-1))/2}function Y(t){const e=U(t);return{level:e,currentXpInLevel:t-G(e),maxXpInLevel:m(e)}}const H=100,T=75,V=4,q=1,C=.05;function K(t){return Math.round(H+j(t)-Z(t))}function j(t){return R(t.rounds.map(z))}function z(t){return q*t.repetitions*J(t.weight)}function J(t){return P(t*Q(t))}function Q(t){return V*P(t)**2}function P(t){return(t+T)/T}function Z(t){const e=t.rounds.slice(0,-1);return R(e.map($))}function $(t){return t.restTime*C}function R(t){return t.reduce((e,n)=>e+n,0)}const ot=_("user",()=>{const t=w(D().getOrElse(tt()));x(()=>N(t.value));const e=A(()=>{const s=t.value.name,l=t.value.bodyWeight,W=t.value.experience,O=Y(W);return{name:s,bodyWeight:l,...O}});function n(s){t.value.name=s.name,t.value.bodyWeight=s.bodyWeight}function o(s){t.value.experience+=s}return{profile:e,saveProfile:n,addXp:o}});function tt(){const e=S().workouts.map(n=>K(n)).reduce((n,o)=>n+o,0);return{id:k(),name:"Guest",bodyWeight:75,experience:e}}export{K as g,ot as u};
